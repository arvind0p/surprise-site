<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Rishika â¤ï¸</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#ff9a9e,#fad0c4);
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    overflow:hidden;
}

/* Fireworks */
canvas{
    position:fixed;
    inset:0;
    z-index:0;
}

/* Card */
.card{
    position:relative;
    z-index:2;
    background:#fff;
    width:100%;
    max-width:420px;
    padding:30px 22px;
    border-radius:20px;
    box-shadow:0 15px 35px rgba(0,0,0,.3);
    text-align:center;
    animation:fadeIn 1.2s ease;
}

button{
    padding:12px 22px;
    font-size:16px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    margin:12px;
}

.primary{background:#ff4d6d;color:white;}
.yes{background:#2ecc71;color:white;}
.no{background:#e74c3c;color:white;position:absolute;}

.hidden{display:none;}

img{
    width:100%;
    max-height:300px;
    object-fit:cover;
    border-radius:15px;
    margin-top:15px;
}

@keyframes fadeIn{
    from{opacity:0;transform:translateY(20px);}
    to{opacity:1;transform:translateY(0);}
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<!-- ğŸµ Music -->
<audio id="bgMusic" loop>
  <source src="{{ url_for('static', filename='music/happy-birthday.mp3') }}" type="audio/mpeg">
</audio>

<div class="card">

    <!-- STEP 1 -->
    <div id="step1">
        <h2>ğŸ A small gift from Arvind</h2>
        <p>On your birthday â¤ï¸</p>
        <button class="primary" onclick="showBirthday()">Show âœ¨</button>
    </div>

    <!-- STEP 2 -->
    <div id="step2" class="hidden">
        <h1>ğŸ‚ Happy Birthday Rishika ğŸ‰</h1>
        <p>
            Today is special because <b>you</b> were born ğŸ’–<br>
            May your smile always stay this beautiful âœ¨
        </p>
        <button class="primary" onclick="showValentine()">Next Surprise ğŸ€</button>
    </div>

    <!-- STEP 3 -->
    <div id="step3" class="hidden">
        <p style="font-size:18px;">ğŸ’˜ Will you be my Valentine? ğŸ’˜</p>
        <button class="yes" onclick="yesClicked()">YES ğŸ’–</button>
        <button id="noBtn" class="no">NO ğŸ™ˆ</button>
    </div>

    <!-- STEP 4 -->
    <div id="step4" class="hidden">
        <h3>ğŸ’– Forever & Always ğŸ’–</h3>
        <p>You make my world brighter just by being you âœ¨</p>
        <img id="slide">
    </div>

</div>

<script>
/* STEP 1 â†’ STEP 2 */
function showBirthday(){
    document.getElementById("step1").classList.add("hidden");
    document.getElementById("step2").classList.remove("hidden");
    document.getElementById("bgMusic").play();
}

/* STEP 2 â†’ STEP 3 */
function showValentine(){
    document.getElementById("step2").classList.add("hidden");
    document.getElementById("step3").classList.remove("hidden");
}

/* NO runaway */
const noBtn=document.getElementById("noBtn");
noBtn.addEventListener("mouseover",()=>{
    noBtn.style.left=Math.random()*(window.innerWidth-120)+"px";
    noBtn.style.top=Math.random()*(window.innerHeight-60)+"px";
});

/* YES â†’ Fireworks â†’ Slideshow */
function yesClicked(){
    document.getElementById("step3").classList.add("hidden");
    startFireworks();

    setTimeout(()=>{
        stopFireworks();
        document.getElementById("step4").classList.remove("hidden");
        startSlideshow();
    },3000);
}

/* Slideshow */
const images=[
"{{ url_for('static', filename='images/pic1.jpg') }}",
"{{ url_for('static', filename='images/pic2.jpg') }}",
"{{ url_for('static', filename='images/pic3.jpg') }}",
"{{ url_for('static', filename='images/pic4.jpg') }}",
"{{ url_for('static', filename='images/pic5.jpg') }}"
];
let i=0;
function startSlideshow(){
    const slide=document.getElementById("slide");
    slide.src=images[i];
    setInterval(()=>{
        i=(i+1)%images.length;
        slide.src=images[i];
    },2500);
}

/* ğŸ† Fireworks */
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;
let particles=[];
let fireInterval;

function startFireworks(){
    fireInterval=setInterval(()=>{
        for(let i=0;i<80;i++){
            particles.push({
                x:Math.random()*canvas.width,
                y:Math.random()*canvas.height,
                vx:(Math.random()-0.5)*6,
                vy:(Math.random()-0.5)*6,
                life:80
            });
        }
    },300);
}

function stopFireworks(){
    clearInterval(fireInterval);
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach((p,idx)=>{
        p.x+=p.vx;
        p.y+=p.vy;
        p.life--;
        ctx.fillStyle="rgba(255,255,255,0.9)";
        ctx.fillRect(p.x,p.y,3,3);
        if(p.life<=0)particles.splice(idx,1);
    });
    requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
