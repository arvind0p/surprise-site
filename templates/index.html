<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>A Gift for You â¤ï¸</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

/* Fireworks */
canvas{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
}

/* Card */
.card{
  position:relative;
  z-index:2;
  background:#fff;
  width:90%;
  max-width:440px;
  padding:28px;
  border-radius:20px;
  box-shadow:0 18px 40px rgba(0,0,0,.3);
  text-align:center;
  animation:fadeIn 1s ease;
}

h1,h2{margin:10px 0}

button{
  padding:12px 22px;
  border:none;
  border-radius:25px;
  font-size:16px;
  cursor:pointer;
  margin:10px;
}

.primary{background:#ff4d6d;color:#fff}
.yes{background:#2ecc71;color:#fff}
.no{
  background:#e74c3c;color:#fff;
  position:relative;
}

.hidden{display:none}

.slider{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.slider img{
  width:100%;
  max-height:320px;
  object-fit:contain;
  border-radius:15px;
}

.arrow{
  font-size:28px;
  background:none;
  border:none;
  cursor:pointer;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:translateY(0)}
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<audio id="bgMusic" loop>
  <source src="{{ url_for('static', filename='music/happy-birthday.mp3') }}" type="audio/mpeg">
</audio>

<div class="card">

  <!-- STEP 1 -->
  <div id="step1">
    ğŸ <b>A small gift from Arvind</b>
    <h2>on your birthday â¤ï¸</h2>
    <button class="primary" id="showBtn">Show âœ¨</button>
  </div>

  <!-- STEP 2 -->
  <div id="step2" class="hidden">
    <h1>ğŸ‚ Happy Birthday Rishika ğŸ‰</h1>
    <p>
      Today is special because <b>you</b> were born ğŸ’–<br>
      May your smile always stay this beautiful âœ¨
    </p>
    <button class="primary" id="nextBtn">Next Surprise ğŸ’Œ</button>
  </div>

  <!-- STEP 3 -->
  <div id="step3" class="hidden">
    <h2>ğŸ’˜ Will you be my Valentine? ğŸ’˜</h2>
    <button class="yes" id="yesBtn">YES ğŸ’–</button>
    <button class="no" id="noBtn">NO ğŸ™ˆ</button>
  </div>

  <!-- STEP 4 -->
  <div id="step4" class="hidden">
    <h2 id="typing"></h2>

    <div class="slider">
      <button class="arrow" id="prev">â¬…ï¸</button>
      <img id="slide">
      <button class="arrow" id="next">â¡ï¸</button>
    </div>

    <p>Forever & Always ğŸ’•</p>
  </div>

</div>

<script>
/* Elements */
const step1=step2=step3=step4=null;
const s1=document.getElementById("step1");
const s2=document.getElementById("step2");
const s3=document.getElementById("step3");
const s4=document.getElementById("step4");

const music=document.getElementById("bgMusic");

/* STEP 1 â†’ STEP 2 */
document.getElementById("showBtn").onclick=()=>{
  s1.classList.add("hidden");
  s2.classList.remove("hidden");
  music.play();
};

/* STEP 2 â†’ STEP 3 */
document.getElementById("nextBtn").onclick=()=>{
  s2.classList.add("hidden");
  s3.classList.remove("hidden");
};

/* NO = FAST DODGE (around YES) */
const noBtn=document.getElementById("noBtn");
noBtn.addEventListener("mouseenter",()=>{
  const x=Math.random()*160-80;
  const y=Math.random()*120-60;
  noBtn.style.transition="transform 0.08s linear";
  noBtn.style.transform=`translate(${x}px,${y}px) scale(1.05)`;
});

/* YES */
document.getElementById("yesBtn").onclick=()=>{
  s3.classList.add("hidden");
  fireworksStart(3000);
  setTimeout(()=>{
    s4.classList.remove("hidden");
    typeText();
    showImage();
  },3200);
};

/* Typing text */
const msg="I love you more than words can say â¤ï¸";
let ti=0;
function typeText(){
  const el=document.getElementById("typing");
  el.innerHTML="";
  const i=setInterval(()=>{
    el.innerHTML+=msg.charAt(ti++);
    if(ti>=msg.length)clearInterval(i);
  },70);
}

/* Slider */
const images=[
"{{ url_for('static', filename='images/pic1.jpg') }}",
"{{ url_for('static', filename='images/pic2.jpg') }}",
"{{ url_for('static', filename='images/pic3.jpg') }}",
"{{ url_for('static', filename='images/pic4.jpg') }}"
];
let idx=0;
const slide=document.getElementById("slide");
function showImage(){slide.src=images[idx]}
document.getElementById("prev").onclick=()=>{
  idx=(idx-1+images.length)%images.length;
  showImage();
};
document.getElementById("next").onclick=()=>{
  idx=(idx+1)%images.length;
  showImage();
};

/* Fireworks */
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth; canvas.height=innerHeight;
let parts=[];
function burst(){
  for(let i=0;i<120;i++){
    parts.push({
      x:Math.random()*canvas.width,
      y:Math.random()*canvas.height/2,
      vx:(Math.random()-0.5)*6,
      vy:(Math.random()-0.5)*6,
      life:80,
      c:`hsl(${Math.random()*360},100%,60%)`
    });
  }
}
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  parts.forEach((p,i)=>{
    p.x+=p.vx; p.y+=p.vy; p.life--;
    ctx.fillStyle=p.c;
    ctx.fillRect(p.x,p.y,3,3);
    if(p.life<=0)parts.splice(i,1);
  });
  requestAnimationFrame(animate);
}
function fireworksStart(ms){
  const t=setInterval(burst,400);
  setTimeout(()=>clearInterval(t),ms);
}
animate();
</script>

</body>
</html>
